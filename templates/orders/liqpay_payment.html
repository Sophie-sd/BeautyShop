{% extends 'base.html' %}
{% load static %}

{% block title %}Оплата замовлення #{{ order.order_number }} - Beauty Shop{% endblock %}

{% block body_class %}payment-page{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/liqpay-payment.css' %}">
{% endblock %}

{% block content %}
<div class="payment-container">
    <div class="payment-header">
        <h1>Оплата замовлення</h1>
        <p>Замовлення #{{ order.order_number }}</p>
    </div>
    
    <div class="payment-info">
        <div class="payment-info-row">
            <span class="payment-info-label">Отримувач:</span>
            <span class="payment-info-value">{{ order.get_customer_name }}</span>
        </div>
        <div class="payment-info-row">
            <span class="payment-info-label">Email:</span>
            <span class="payment-info-value">{{ order.email }}</span>
        </div>
        <div class="payment-info-row">
            <span class="payment-info-label">Телефон:</span>
            <span class="payment-info-value">{{ order.phone }}</span>
        </div>
        <div class="payment-info-row">
            <span class="payment-info-label">Доставка:</span>
            <span class="payment-info-value">{{ order.get_delivery_method_display }}</span>
        </div>
        <div class="payment-info-row">
            <span class="payment-info-label">До сплати:</span>
            <span class="payment-info-value payment-total">{{ order.total }} ₴</span>
        </div>
    </div>
    
    <div class="liqpay-button-wrapper">
        <form method="POST" action="https://www.liqpay.ua/api/3/checkout" accept-charset="utf-8" class="liqpay-form" id="liqpay-form">
            <input type="hidden" name="data" value="{{ data }}">
            <input type="hidden" name="signature" value="{{ signature }}">
            <button type="submit" class="btn-liqpay" id="liqpay-submit-btn">
                <span class="spinner"></span>
                <span class="btn-text">Оплатити {{ order.total }} ₴</span>
            </button>
        </form>
    </div>
    
    <p class="payment-note">
        Ви будете перенаправлені на безпечну сторінку оплати LiqPay
    </p>
    
    <div class="back-link">
        <a href="{% url 'orders:create' %}">← Повернутись до оформлення</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/liqpay-payment.js' %}"></script>
{% endblock %}
