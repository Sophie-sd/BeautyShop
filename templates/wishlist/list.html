{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}–°–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å | Beauty Shop{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/wishlist.css' %}">
{% endblock %}

{% block content %}
<div class="wishlist-page">
    <div class="container">
        <!-- Page Header -->
        <div class="wishlist-header">
            <h1 class="page-title">
                <svg class="title-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.84 4.61C20.3292 4.099 19.7228 3.69364 19.0554 3.41708C18.3879 3.14052 17.6725 2.99817 16.95 2.99817C16.2275 2.99817 15.5121 3.14052 14.8446 3.41708C14.1772 3.69364 13.5708 4.099 13.06 4.61L12 5.67L10.94 4.61C9.9083 3.57831 8.50903 2.99871 7.05 2.99871C5.59096 2.99871 4.19169 3.57831 3.16 4.61C2.1283 5.64169 1.54871 7.04097 1.54871 8.5C1.54871 9.95903 2.1283 11.3583 3.16 12.39L4.22 13.45L12 21.23L19.78 13.45L20.84 12.39C21.351 11.8792 21.7564 11.2728 22.0329 10.6054C22.3095 9.93789 22.4518 9.22248 22.4518 8.5C22.4518 7.77752 22.3095 7.06211 22.0329 6.39464C21.7564 5.72718 21.351 5.12084 20.84 4.61Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                –°–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å
            </h1>
            {% if products %}
            <p class="wishlist-count">{{ products|length }} {{ products|length|pluralize:"—Ç–æ–≤–∞—Ä,—Ç–æ–≤–∞—Ä–∏,—Ç–æ–≤–∞—Ä—ñ–≤" }}</p>
            {% endif %}
        </div>

        {% if products %}
        <!-- Wishlist Items -->
        <div class="wishlist-content">
            <div class="products-grid">
                {% for product in products %}
                <article class="product-card" data-product-id="{{ product.id }}">
                    <!-- –ú–µ–¥—ñ–∞–±–ª–æ–∫ -->
                    <div class="product-card__media">
                        <a href="{{ product.get_absolute_url }}">
                            {% if product.images.first %}
                            <img 
                                src="{{ product.images.first.image.url }}" 
                                alt="{{ product.name }}" 
                                class="product-card__image"
                                loading="lazy"
                                width="300"
                                height="300"
                            >
                            {% else %}
                            <div class="product-card__placeholder" aria-label="–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –≤—ñ–¥—Å—É—Ç–Ω—î">
                                üì¶
                            </div>
                            {% endif %}
                        </a>
                        
                        <!-- –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –æ–±—Ä–∞–Ω–æ–≥–æ -->
                        <button 
                            type="button"
                            class="product-card__remove-wishlist" 
                            data-product-id="{{ product.id }}" 
                            aria-label="–í–∏–¥–∞–ª–∏—Ç–∏ –∑ –æ–±—Ä–∞–Ω–æ–≥–æ"
                            title="–í–∏–¥–∞–ª–∏—Ç–∏ –∑ –æ–±—Ä–∞–Ω–æ–≥–æ"
                        >
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        
                        <!-- –ë–µ–π–¥–∂—ñ -->
                        {% if product.is_sale or product.is_new or product.is_top %}
                        <div class="product-card__badges">
                            {% if product.is_sale %}
                            <span class="product-badge product-badge--sale" aria-label="–ó–Ω–∏–∂–∫–∞">
                                -{{ product.get_discount_percentage }}%
                            </span>
                            {% endif %}
                            {% if product.is_new %}
                            <span class="product-badge product-badge--new" aria-label="–ù–æ–≤–∏–Ω–∫–∞">
                                NEW
                            </span>
                            {% endif %}
                            {% if product.is_top %}
                            <span class="product-badge product-badge--top" aria-label="–¢–æ–ø –ø—Ä–æ–¥–∞–∂—ñ–≤">
                                –¢–û–ü
                            </span>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–æ–≤–∞—Ä -->
                    <div class="product-card__content">
                        <h3 class="product-card__title">
                            <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                        </h3>
                        
                        {% if product.category %}
                        <p class="product-card__category">{{ product.category.name }}</p>
                        {% endif %}

                        <!-- –¶—ñ–Ω–∞ -->
                        <div class="product-card__price">
                            {% if product.is_sale and product.sale_price %}
                            <span class="product-card__price-old">{{ product.retail_price|floatformat:0 }} ‚Ç¥</span>
                            <span class="product-card__price-current">{{ product.sale_price|floatformat:0 }} ‚Ç¥</span>
                            {% else %}
                            <span class="product-card__price-current">{{ product.retail_price|floatformat:0 }} ‚Ç¥</span>
                            {% endif %}
                        </div>

                        <!-- –°—Ç–∞—Ç—É—Å –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ -->
                        <div class="product-card__stock">
                            {% if product.is_in_stock %}
                            <span class="stock-status stock-status--in">–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                            {% else %}
                            <span class="stock-status stock-status--out">–ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                            {% endif %}
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∞ –≤ –∫–æ—à–∏–∫ -->
                        {% if product.is_in_stock %}
                        <button type="button" class="btn btn-primary btn-add-to-cart" data-product-id="{{ product.id }}">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 17.9 19 19 19S21 17.9 21 17V13M9 19.5C9.8 19.5 10.5 20.2 10.5 21S9.8 22.5 9 22.5 7.5 21.8 7.5 21 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21S20.8 22.5 20 22.5 18.5 21.8 18.5 21 19.2 19.5 20 19.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            –í –∫–æ—à–∏–∫
                        </button>
                        {% else %}
                        <button type="button" class="btn btn-secondary" disabled>
                            –ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
                        </button>
                        {% endif %}
                    </div>
                </article>
                {% endfor %}
            </div>

            <!-- Actions -->
            <div class="wishlist-actions">
                <a href="{% url 'core:home' %}" class="btn btn-secondary btn-sm">
                    –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–æ–∫—É–ø–∫–∏
                </a>
                <a href="{% url 'wishlist:clear' %}" class="btn btn-outline btn-sm" data-confirm="–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –æ—á–∏—Å—Ç–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å?">
                    –û—á–∏—Å—Ç–∏—Ç–∏ —Å–ø–∏—Å–æ–∫
                </a>
            </div>
        </div>
        {% else %}
        <!-- Empty Wishlist -->
        <div class="wishlist-empty">
            <div class="empty-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.84 4.61C20.3292 4.099 19.7228 3.69364 19.0554 3.41708C18.3879 3.14052 17.6725 2.99817 16.95 2.99817C16.2275 2.99817 15.5121 3.14052 14.8446 3.41708C14.1772 3.69364 13.5708 4.099 13.06 4.61L12 5.67L10.94 4.61C9.9083 3.57831 8.50903 2.99871 7.05 2.99871C5.59096 2.99871 4.19169 3.57831 3.16 4.61C2.1283 5.64169 1.54871 7.04097 1.54871 8.5C1.54871 9.95903 2.1283 11.3583 3.16 12.39L4.22 13.45L12 21.23L19.78 13.45L20.84 12.39C21.351 11.8792 21.7564 11.2728 22.0329 10.6054C22.3095 9.93789 22.4518 9.22248 22.4518 8.5C22.4518 7.77752 22.3095 7.06211 22.0329 6.39464C21.7564 5.72718 21.351 5.12084 20.84 4.61Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <h2 class="empty-title">–í–∞—à —Å–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å –ø–æ—Ä–æ–∂–Ω—ñ–π</h2>
            <p class="empty-text">–î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏, —è–∫—ñ –≤–∞–º —Å–ø–æ–¥–æ–±–∞–ª–∏—Å—å, —â–æ–± –Ω–µ –≤—Ç—Ä–∞—Ç–∏—Ç–∏ —ó—Ö</p>
            <a href="{% url 'core:catalog' %}" class="btn btn-primary">
                –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É
            </a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/wishlist.js' %}"></script>
{% endblock %}

