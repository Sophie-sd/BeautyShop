{% load static %}

<!-- Top Bar -->
<div class="top-bar">
    <div class="container">
        <div class="top-bar-content">
            <div class="top-bar-left">
                <div class="contact-info">
                    <span class="phone">
                        <i class="icon-phone" aria-hidden="true"></i>
                        <a href="tel:+380681752654">{{ site_phone }}</a>
                    </span>
                    <span class="schedule">
                        <i class="icon-clock" aria-hidden="true"></i>
                        –ü–Ω-–ü—Ç 09:00-18:00, –°–± 10:00-16:00, –ù–¥ 10:00-15:00
                    </span>
                </div>
            </div>
            <div class="top-bar-right">
                <div class="user-actions">
                    {% if user.is_authenticated %}
                        <a href="{% url 'users:profile' %}" class="user-link">
                            <i class="icon-user" aria-hidden="true"></i>
                            {{ user.first_name|default:user.username }}
                            {% if user.is_wholesale %}
                                <span class="wholesale-badge">–û–ü–¢</span>
                            {% endif %}
                        </a>
                        <a href="{% url 'users:logout' %}" class="logout-link">–í–∏—Ö—ñ–¥</a>
                    {% else %}
                        <a href="{% url 'users:login' %}" class="login-link">
                            <i class="icon-user" aria-hidden="true"></i>
                            –í—Ö—ñ–¥
                        </a>
                        <a href="{% url 'users:register' %}" class="register-link">
                            –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (–û–ü–¢)
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Header -->
<div class="main-header">
    <div class="container">
        <div class="header-content">
            <!-- Logo -->
            <div class="logo">
                <a href="{% url 'core:home' %}" class="logo-link" aria-label="Beauty Shop - –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞">
                    <img src="{% static 'images/logo_beautyshop.png' %}" alt="Beauty Shop" class="logo-img">
                </a>
            </div>
            
            <!-- Search -->
            <div class="search-container">
                <form action="{% url 'core:search' %}" method="get" class="search-form" role="search">
                    <div class="search-input-group">
                        <input 
                            type="search" 
                            name="q" 
                            placeholder="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤..." 
                            class="search-input"
                            value="{{ request.GET.q|default:'' }}"
                            aria-label="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤"
                            autocomplete="off"
                        >
                        <button type="submit" class="search-btn" aria-label="–ó–Ω–∞–π—Ç–∏">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Cart & Wishlist - Desktop Only -->
            <div class="header-actions desktop-actions">
                <!-- Wishlist -->
                <a href="#" class="wishlist-link" aria-label="–°–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å">
                    <i class="icon-heart" aria-hidden="true"></i>
                    <span class="badge">0</span>
                </a>
                
                <!-- Cart -->
                <a href="{% url 'cart:detail' %}" class="cart-link" aria-label="–ö–æ—à–∏–∫ –ø–æ–∫—É–ø–æ–∫">
                    <span class="cart-icon">üõí</span>
                    {% if cart_total_items %}
                        <span class="badge">{{ cart_total_items }}</span>
                    {% endif %}
                </a>
            </div>

            <!-- Mobile Search - Mobile Only -->
            <div class="header-actions mobile-actions">
                <button type="button" class="mobile-search-btn" aria-label="–ü–æ—à—É–∫" id="mobileSearchToggle">
                    <img src="{% static 'images/lupa.png' %}" alt="–ü–æ—à—É–∫" class="search-icon">
                </button>
            </div>

            <!-- Mobile Search Form (Initially Hidden) -->
            <div class="mobile-search-form-container" id="mobileSearchForm">
                <form action="{% url 'core:search' %}" method="get" class="mobile-search-form" role="search">
                    <div class="mobile-search-input-group">
                        <input 
                            type="search" 
                            name="q" 
                            placeholder="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤..." 
                            class="mobile-search-input"
                            id="mobileSearchInput"
                            aria-label="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤"
                            autocomplete="off"
                        >
                        <button type="button" class="mobile-search-close" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ –ø–æ—à—É–∫" id="mobileSearchClose">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button type="submit" class="mobile-search-submit" aria-label="–ó–Ω–∞–π—Ç–∏">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Navigation -->
<nav class="main-nav desktop-nav" role="navigation" aria-label="–ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é">
    <div class="container">
        <ul class="nav-list">
            <li class="nav-item">
                <a href="{% url 'core:home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                    –ì–æ–ª–æ–≤–Ω–∞
                </a>
            </li>
            <li class="nav-item dropdown">
                <a href="{% url 'core:catalog' %}" class="nav-link {% if request.resolver_match.url_name == 'catalog' %}active{% endif %}">
                    –ö–∞—Ç–∞–ª–æ–≥
                    <i class="icon-chevron-down" aria-hidden="true"></i>
                </a>
                <div class="dropdown-menu">
                    <div class="dropdown-content">
                        {% for category in main_categories %}
                            <a href="{{ category.get_absolute_url }}" class="dropdown-link">
                                {{ category.name }}
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a href="{% url 'products:sale' %}" class="nav-link {% if request.resolver_match.url_name == 'sale' %}active{% endif %}">
                    –ê–∫—Ü—ñ—ó
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'core:delivery' %}" class="nav-link {% if request.resolver_match.url_name == 'delivery' %}active{% endif %}">
                    –î–æ—Å—Ç–∞–≤–∫–∞ —Ç–∞ –æ–ø–ª–∞—Ç–∞
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'core:returns' %}" class="nav-link {% if request.resolver_match.url_name == 'returns' %}active{% endif %}">
                    –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ç–∞ –æ–±–º—ñ–Ω
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'blog:list' %}" class="nav-link {% if request.resolver_match.url_name == 'list' %}active{% endif %}">
                    –ë–ª–æ–≥
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'core:about' %}" class="nav-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}">
                    –ü—Ä–æ –Ω–∞—Å
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'core:contacts' %}" class="nav-link {% if request.resolver_match.url_name == 'contacts' %}active{% endif %}">
                    –ö–æ–Ω—Ç–∞–∫—Ç–∏
                </a>
            </li>
        </ul>
    </div>
</nav>
