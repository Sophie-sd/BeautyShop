{% load static %}
<div class="product-card">
    <div class="product-image">
        <a href="{{ product.get_absolute_url }}">
            {% if product.images.first %}
                <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" loading="lazy">
            {% else %}
                <div class="product-no-image">
                    <span class="no-image-text">–§–æ—Ç–æ –≤—ñ–¥—Å—É—Ç–Ω—î</span>
                </div>
            {% endif %}
            
            {% if product.get_stickers %}
                <div class="product-labels">
                    {% for sticker in product.get_stickers %}
                        <span class="product-label {{ sticker.type }}">
                            {{ sticker.text }}
                        </span>
                    {% endfor %}
                </div>
            {% endif %}
        </a>
    </div>
    
    <div class="product-info">
        <h3 class="product-name">
            <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
        </h3>
        
        {% if product.category %}
            <p class="product-category">{{ product.category.name }}</p>
        {% endif %}
        
        <div class="product-pricing">
            {% if product.is_sale and product.sale_price %}
                <div class="price-row">
                    <span class="price-current">{{ product.sale_price }} ‚Ç¥</span>
                    <span class="price-old">{{ product.retail_price }} ‚Ç¥</span>
                </div>
                <div class="price-save">
                    <span>–ï–∫–æ–Ω–æ–º—ñ—è: {{ product.get_discount_amount }} ‚Ç¥</span>
                </div>
            {% else %}
                <div class="price-row">
                    <span class="price-current">{{ product.retail_price }} ‚Ç¥</span>
                </div>
            {% endif %}
            
            {% if user.is_authenticated and product.wholesale_price %}
                <div class="price-row">
                    <span class="price-wholesale">–û–ø—Ç: {{ product.wholesale_price }} ‚Ç¥</span>
                </div>
            {% endif %}
        </div>
        
        <div class="product-actions">
            <button class="btn btn-primary add-to-cart-btn" 
                    data-product-id="{{ product.id }}" 
                    aria-label="–î–æ–¥–∞—Ç–∏ {{ product.name }} –¥–æ –∫–æ—à–∏–∫–∞">
                <span class="cart-icon">üõí</span>
                –£ –∫–æ—à–∏–∫
            </button>
        </div>
    </div>
</div>

