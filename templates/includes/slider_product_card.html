{% load static %}
<div class="product-card card fade-in">
    <div class="product-image">
        <a href="{{ product.get_absolute_url }}">
            {% if product.images.first %}
                <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" loading="lazy">
            {% else %}
                <div class="product-placeholder">
                    <span class="placeholder-icon">üì¶</span>
                </div>
            {% endif %}
            
            {% if product.get_stickers %}
                <div class="product-stickers">
                    {% for sticker in product.get_stickers %}
                        <span class="product-sticker sticker-{{ sticker.type }}">
                            {{ sticker.text }}
                        </span>
                    {% endfor %}
                </div>
            {% endif %}
        </a>
    </div>
    
    <div class="product-content">
        <h3 class="product-name">
            <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
        </h3>
        
        <div class="product-price">
            {% if product.is_sale and product.sale_price %}
                <span class="price-old">{{ product.retail_price }} ‚Ç¥</span>
                <span class="price-current">{{ product.sale_price }} ‚Ç¥</span>
            {% else %}
                <div class="price-row">
                    <span class="price-current">{{ product.retail_price }} ‚Ç¥</span>
                    <small class="price-type">—Ä–æ–∑–¥—Ä—ñ–±</small>
                </div>
                {% if user.is_authenticated and product.wholesale_price %}
                    <div class="price-row wholesale">
                        <span class="price-wholesale">{{ product.wholesale_price }} ‚Ç¥</span>
                        <small class="price-type">–æ–ø—Ç</small>
                    </div>
                {% endif %}
            {% endif %}
            
            {% if product.price_3_qty or product.price_5_qty %}
                <div class="quantity-prices">
                    {% if product.price_3_qty %}
                        <div class="qty-price">
                            <span>–≤—ñ–¥ 3 —à—Ç: <strong>{{ product.price_3_qty }} ‚Ç¥</strong></span>
                        </div>
                    {% endif %}
                    {% if product.price_5_qty %}
                        <div class="qty-price">
                            <span>–≤—ñ–¥ 5 —à—Ç: <strong>{{ product.price_5_qty }} ‚Ç¥</strong></span>
                        </div>
                    {% endif %}
                </div>
            {% endif %}
        </div>
        
        <div class="product-actions">
            <button class="btn btn-primary btn-sm add-to-cart" 
                    data-product-id="{{ product.id }}"
                    data-product-name="{{ product.name }}"
                    {% if not product.is_in_stock %}disabled{% endif %}>
                {% if product.is_in_stock %}
                    –ö—É–ø–∏—Ç–∏
                {% else %}
                    –ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
                {% endif %}
            </button>
            <button class="btn btn-outline btn-sm wishlist-btn" 
                    data-product-id="{{ product.id }}"
                    aria-label="–î–æ–¥–∞—Ç–∏ –≤ —Å–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å">
                <span class="icon-heart">‚ô°</span>
            </button>
        </div>
    </div>
</div>

