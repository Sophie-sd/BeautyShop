# üîí –ö–µ—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ –∑ –±–µ–∑–ø–µ–∫–∏ Beauty Shop

## üìã –ó–º—ñ—Å—Ç

1. [–°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó](#—Å–∏—Å—Ç–µ–º–∞-–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)
2. [–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—ñ–≤](#—Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è-–¥–æ—Å—Ç—É–ø—ñ–≤)
3. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ–π](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-—Å–µ—Å—ñ–π)
4. [CSRF —Ç–∞ XSS –∑–∞—Ö–∏—Å—Ç](#csrf-—Ç–∞-xss-–∑–∞—Ö–∏—Å—Ç)
5. [–ë–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–±–µ–∑–ø–µ—á–Ω—ñ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
6. [FAQ –∑ –±–µ–∑–ø–µ–∫–∏](#faq-–∑-–±–µ–∑–ø–µ–∫–∏)

---

## üîê –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

### –î–≤–∞ –æ–∫—Ä–µ–º–∏—Ö backend –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:

#### 1. `WholesaleClientBackend` ‚Äî –î–ª—è –æ–ø—Ç–æ–≤–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤
**–§–∞–π–ª:** `apps/users/backends.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—Ö–æ–¥—É –≤ **–æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç** (`/users/login/`)
- –î–æ—Å—Ç—É–ø–Ω–∏–π –¢–Ü–õ–¨–ö–ò –¥–ª—è –∑–≤–∏—á–∞–π–Ω–∏—Ö –æ–ø—Ç–æ–≤–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤

**–ü—Ä–∞–≤–∏–ª–∞ –≤—Ö–æ–¥—É:**
- ‚úÖ –î–æ–∑–≤–æ–ª—è—î –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ **email** –∞–±–æ **—Ç–µ–ª–µ—Ñ–æ–Ω**
- ‚ùå **–ù–ï –¥–æ–∑–≤–æ–ª—è—î** –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ username
- ‚ùå **–ó–ê–ë–û–†–û–ù–Ø–Ñ** –≤—Ö—ñ–¥ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º (`is_staff=True` –∞–±–æ `is_superuser=True`)

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```python
# –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≤–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑:
# - Email: client@example.com
# - –¢–µ–ª–µ—Ñ–æ–Ω: +380991234567
# –ê–ª–µ –ù–ï —á–µ—Ä–µ–∑ username!
```

---

#### 2. `AdminOnlyBackend` ‚Äî –î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
**–§–∞–π–ª:** `apps/users/backends.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—Ö–æ–¥—É –≤ **–∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å** (`/admin/`)
- –î–æ—Å—Ç—É–ø–Ω–∏–π –¢–Ü–õ–¨–ö–ò –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤

**–ü—Ä–∞–≤–∏–ª–∞ –≤—Ö–æ–¥—É:**
- ‚úÖ –î–æ–∑–≤–æ–ª—è—î –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ **username**, **email** –∞–±–æ **—Ç–µ–ª–µ—Ñ–æ–Ω**
- ‚úÖ **–¢–Ü–õ–¨–ö–ò** –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ `is_staff=True` –∞–±–æ `is_superuser=True`
- ‚ùå **–ó–ê–ë–û–†–û–ù–Ø–Ñ** –≤—Ö—ñ–¥ –∑–≤–∏—á–∞–π–Ω–∏–º –∫–ª—ñ—î–Ω—Ç–∞–º

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```python
# –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –≤–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑:
# - Username: admin
# - Email: admin@beautyshop.ua
# - –¢–µ–ª–µ—Ñ–æ–Ω: +380123456789
```

---

### –ü–æ—Ä—è–¥–æ–∫ backends —É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö:

**–§–∞–π–ª:** `beautyshop/settings/base.py`

```python
AUTHENTICATION_BACKENDS = [
    'apps.users.backends.WholesaleClientBackend',  # –ü–µ—Ä—à–∏–π ‚Äî –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
    'apps.users.backends.AdminOnlyBackend',        # –î—Ä—É–≥–∏–π ‚Äî –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤
    'django.contrib.auth.backends.ModelBackend',   # Fallback
]
```

**–í–∞–∂–ª–∏–≤–æ:** –ü–æ—Ä—è–¥–æ–∫ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è! Django –ø–µ—Ä–µ–≤—ñ—Ä—è—î backends –ø–æ —á–µ—Ä–∑—ñ.

---

## üöß –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—ñ–≤

### –•—Ç–æ –∫—É–¥–∏ –º–æ–∂–µ –∑–∞—Ö–æ–¥–∏—Ç–∏:

| –¢–∏–ø –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç (`/users/`) | –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å (`/admin/`) |
|----------------|------------------------------|--------------------------|
| **–û–ø—Ç–æ–≤–∏–π –∫–ª—ñ—î–Ω—Ç** (–∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á) | ‚úÖ –¢–∞–∫ | ‚ùå –ù—ñ |
| **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä** (`is_staff=True`) | ‚ùå –ù—ñ | ‚úÖ –¢–∞–∫ |
| **–°—É–ø–µ—Ä–∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä** (`is_superuser=True`) | ‚ùå –ù—ñ | ‚úÖ –¢–∞–∫ |
| **–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π** | ‚ùå –ù—ñ (—Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ login) | ‚ùå –ù—ñ (—Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ admin/login) |

---

### –ó–∞—Ö–∏—Å—Ç –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É –≤—ñ–¥ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:

**–§–∞–π–ª:** `apps/users/views.py`

–í—Å—ñ views –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É –º–∞—é—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –≤ –º–µ—Ç–æ–¥—ñ `dispatch()`:

```python
def dispatch(self, request, *args, **kwargs):
    # –ë–ï–ó–ü–ï–ö–ê: –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –ù–ï –º–æ–∂—É—Ç—å –∑–∞—Ö–æ–¥–∏—Ç–∏ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç
    if request.user.is_authenticated and (request.user.is_staff or request.user.is_superuser):
        messages.error(
            request,
            'üîí –î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ. –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –Ω–µ –º–∞—é—Ç—å –¥–æ—Å—Ç—É–ø—É –¥–æ –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É –æ–ø—Ç–æ–≤–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤.'
        )
        return redirect('/admin/')
    return super().dispatch(request, *args, **kwargs)
```

**–ó–∞—Ö–∏—â–µ–Ω—ñ views:**
- ‚úÖ `ProfileView` ‚Äî –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç
- ‚úÖ `UserOrdersView` ‚Äî –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ `ProfileEditView` ‚Äî —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

---

### –ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ?

1. **–ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∞–º:**
   - –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –Ω–µ –±–∞—á–∞—Ç—å –æ–ø—Ç–æ–≤—ñ —Ü—ñ–Ω–∏
   - –ù–µ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø–ª—É—Ç–∞–Ω–∏–Ω–∞ –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏
   
2. **–ë–µ–∑–ø–µ–∫–∞ –¥–∞–Ω–∏—Ö:**
   - –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω–∫—É
   - –ù–µ–º–∞—î –∑–º—ñ—à—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
   
3. **–ß—ñ—Ç–∫—ñ—Å—Ç—å —Ä–æ–ª–µ–π:**
   - –ê–¥–º—ñ–Ω = —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∞–π—Ç–æ–º
   - –ö–ª—ñ—î–Ω—Ç = –ø–æ–∫—É–ø–∫–∏ –∑ –æ–ø—Ç–æ–≤–∏–º–∏ —Ü—ñ–Ω–∞–º–∏

---

## ‚è∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ–π

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

**–§–∞–π–ª:** `beautyshop/settings/base.py`

```python
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ–π –¥–ª—è –û–ü–¢–û–í–ò–• –ö–õ–Ü–Ñ–ù–¢–Ü–í
SESSION_COOKIE_AGE = 60 * 60 * 24 * 7  # 7 –¥–Ω—ñ–≤
SESSION_SAVE_EVERY_REQUEST = True
SESSION_COOKIE_SECURE = not DEBUG  # HTTPS only –≤ production
SESSION_COOKIE_HTTPONLY = True  # –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ XSS –∞—Ç–∞–∫
SESSION_COOKIE_SAMESITE = 'Lax'  # –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ CSRF –∞—Ç–∞–∫
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:

```python
# –û–∫—Ä–µ–º—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ê–î–ú–Ü–ù–ö–ò (–∫–æ—Ä–æ—Ç—à–∞ —Å–µ—Å—ñ—è –¥–ª—è –±–µ–∑–ø–µ–∫–∏)
ADMIN_SESSION_COOKIE_AGE = 60 * 60 * 8  # 8 –≥–æ–¥–∏–Ω
```

---

### –ß–æ–º—É —Ä—ñ–∑–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∏ —Å–µ—Å—ñ–π?

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø—Ç–æ–≤—ñ –∫–ª—ñ—î–Ω—Ç–∏ | –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ | –ü–æ—è—Å–Ω–µ–Ω–Ω—è |
|----------|---------------|----------------|-----------|
| **–¢–µ—Ä–º—ñ–Ω –¥—ñ—ó** | 7 –¥–Ω—ñ–≤ | 8 –≥–æ–¥–∏–Ω | –ö–ª—ñ—î–Ω—Ç–∏ –≤—Ö–æ–¥—è—Ç—å —Ä—ñ–¥—à–µ, –∞–¥–º—ñ–Ω–∏ ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–æ |
| **–ë–µ–∑–ø–µ–∫–∞** | –°–µ—Ä–µ–¥–Ω—è | –í–∏—Å–æ–∫–∞ | –ê–¥–º—ñ–Ω–∫–∞ ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–∏–π –¥–æ—Å—Ç—É–ø |
| **–ó—Ä—É—á–Ω—ñ—Å—Ç—å** | –í–∏—Å–æ–∫–∞ | –°–µ—Ä–µ–¥–Ω—è | –ö–ª—ñ—î–Ω—Ç–∏ –Ω–µ —Ö–æ—á—É—Ç—å —á–∞—Å—Ç–æ –≤–≤–æ–¥–∏—Ç–∏ –ø–∞—Ä–æ–ª—å |

---

### –ö–æ–ª–∏ –∑–∞–ø–∏—Ç—É—î—Ç—å—Å—è –ø–∞—Ä–æ–ª—å:

‚úÖ **–ó–∞–ø–∏—Ç—É—î—Ç—å—Å—è –ø–∞—Ä–æ–ª—å –ø—Ä–∏:**
- –ü–µ—Ä—à–æ–º—É –≤—Ö–æ–¥—ñ –Ω–∞ —Å–∞–π—Ç
- –ü—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è cookies/cache
- –ü—ñ—Å–ª—è –≤–∏—Ö–æ–¥—É –∑ –∞–∫–∞—É–Ω—Ç—É (logout)
- –ü—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—É —Å–µ—Å—ñ—ó (7 –¥–Ω—ñ–≤ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤, 8 –≥–æ–¥–∏–Ω –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤)

‚ùå **–ù–ï –∑–∞–ø–∏—Ç—É—î—Ç—å—Å—è –ø–∞—Ä–æ–ª—å:**
- –ü—ñ–¥ —á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ—ó —Å–µ—Å—ñ—ó
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏ —Å–∞–π—Ç—É
- –ü—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ/–≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –±—Ä–∞—É–∑–µ—Ä–∞ (—è–∫—â–æ —Å–µ—Å—ñ—è –∞–∫—Ç–∏–≤–Ω–∞)

---

## üõ°Ô∏è CSRF —Ç–∞ XSS –∑–∞—Ö–∏—Å—Ç

### CSRF (Cross-Site Request Forgery) –∑–∞—Ö–∏—Å—Ç:

**–§–∞–π–ª:** `beautyshop/settings/base.py`

```python
# CSRF settings
CSRF_COOKIE_HTTPONLY = False  # –î–æ–∑–≤–æ–ª—è—î JavaScript —á–∏—Ç–∞—Ç–∏ CSRF —Ç–æ–∫–µ–Ω
CSRF_USE_SESSIONS = False     # –ó–±–µ—Ä—ñ–≥–∞—î CSRF —Ç–æ–∫–µ–Ω —É cookies
CSRF_COOKIE_SAMESITE = 'Lax'  # –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ CSRF –∞—Ç–∞–∫
```

**–í development.py:**
```python
CSRF_TRUSTED_ORIGINS = [
    'http://localhost:8000',
    'http://127.0.0.1:8000',
    'https://*.onrender.com',
    'https://beautyshop-django.onrender.com',
]
```

---

### XSS (Cross-Site Scripting) –∑–∞—Ö–∏—Å—Ç:

```python
# Security settings
SECURE_BROWSER_XSS_FILTER = True       # –í–±—É–¥–æ–≤–∞–Ω–∏–π XSS —Ñ—ñ–ª—å—Ç—Ä –±—Ä–∞—É–∑–µ—Ä–∞
SECURE_CONTENT_TYPE_NOSNIFF = True     # –ó–∞–ø–æ–±—ñ–≥–∞—î MIME-type sniffing
X_FRAME_OPTIONS = 'DENY'               # –ó–∞–ø–æ–±—ñ–≥–∞—î clickjacking
SESSION_COOKIE_HTTPONLY = True         # JavaScript –Ω–µ –º–æ–∂–µ —á–∏—Ç–∞—Ç–∏ session cookie
```

---

### HTTPS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (Production):

```python
SECURE_HSTS_SECONDS = 31536000         # 1 —Ä—ñ–∫
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
SESSION_COOKIE_SECURE = True           # Cookies —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ HTTPS
```

---

## üîë –ë–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ü–∞—Ä–æ–ª—ñ

**–í–∏–º–æ–≥–∏ –¥–æ –ø–∞—Ä–æ–ª—ñ–≤:**
- ‚úÖ –ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤
- ‚úÖ –ú—ñ–Ω—ñ–º—É–º 1 –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞
- ‚úÖ –ú—ñ–Ω—ñ–º—É–º 1 —Ü–∏—Ñ—Ä–∞
- ‚úÖ –•–µ—à—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Django `PBKDF2PasswordHasher`

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Django:**
```python
PASSWORD_HASHERS = [
    'django.contrib.auth.hashers.PBKDF2PasswordHasher',
    'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',
    'django.contrib.auth.hashers.Argon2PasswordHasher',
]
```

---

### 2. Email –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è

**–í—Å—ñ –Ω–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –û–ë–û–í'–Ø–ó–ö–û–í–û –ø—Ä–æ—Ö–æ–¥—è—Ç—å –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—é email:**

1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è ‚Üí –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑ `is_active=False`
2. –í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è email –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º
3. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î –Ω–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
4. Email –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î—Ç—å—Å—è ‚Üí `is_active=True`
5. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —É–≤—ñ–π—Ç–∏

**–§–∞–π–ª–∏:**
- `apps/users/models.py` ‚Äî –º–æ–¥–µ–ª—å –∑ –ø–æ–ª–µ–º `email_verification_token`
- `apps/users/utils.py` ‚Äî —Ñ—É–Ω–∫—Ü—ñ—è `send_verification_email()`
- `apps/users/views.py` ‚Äî `EmailVerificationView`

---

### 3. –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ brute-force –∞—Ç–∞–∫

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**

1. **Django Axes** (–æ–ø—Ü—ñ–π–Ω–æ, –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏):
   ```bash
   pip install django-axes
   ```
   - –ë–ª–æ–∫—É—î IP –ø—ñ—Å–ª—è N –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –≤—Ö–æ–¥—É
   - –õ–æ–≥—É—î –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

2. **Rate limiting** –Ω–∞ —Ä—ñ–≤–Ω—ñ nginx/gunicorn:
   ```nginx
   limit_req_zone $binary_remote_addr zone=login:10m rate=5r/m;
   ```

3. **Captcha** –¥–ª—è —Ñ–æ—Ä–º–∏ –≤—Ö–æ–¥—É (–æ–ø—Ü—ñ–π–Ω–æ):
   - Google reCAPTCHA
   - Django Simple Captcha

---

### 4. –õ–æ–≥—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–æ–≤–∏—Ö –ø–æ–¥—ñ–π

**–§–∞–π–ª:** `apps/users/views.py`

–í—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–¥—ñ—ó –ª–æ–≥—É—é—Ç—å—Å—è:

```python
import logging
logger = logging.getLogger(__name__)

# –ü—Ä–∏–∫–ª–∞–¥–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
logger.info(f"üìù New user registered: {user.email}")
logger.info(f"‚úÖ User logged in: {user.email}")
logger.warning(f"‚ö†Ô∏è Failed login attempt for: {username}")
logger.error(f"‚ùå Security violation: Admin tried to access client area")
```

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è:**
```python
LOGGING = {
    'version': 1,
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': 'logs/security.log',
        },
    },
    'loggers': {
        'apps.users': {
            'handlers': ['file'],
            'level': 'INFO',
        },
    },
}
```

---

### 5. –ë–µ–∑–ø–µ–∫–∞ —É production

**–ß–µ–∫–ª–∏—Å—Ç –¥–ª—è production:**

- [ ] `DEBUG = False`
- [ ] `SECRET_KEY` —É –∑–º—ñ–Ω–Ω—ñ–π –æ—Ç–æ—á–µ–Ω–Ω—è (–Ω–µ –≤ –∫–æ–¥—ñ!)
- [ ] HTTPS —É–≤—ñ–º–∫–Ω–µ–Ω–æ (—á–µ—Ä–µ–∑ Nginx/Cloudflare)
- [ ] `SESSION_COOKIE_SECURE = True`
- [ ] `CSRF_COOKIE_SECURE = True`
- [ ] `SECURE_SSL_REDIRECT = True`
- [ ] –†–µ–≥—É–ª—è—Ä–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- [ ] Backup –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —â–æ–¥–Ω—è
- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥—ñ–≤

---

## ‚ùì FAQ –∑ –±–µ–∑–ø–µ–∫–∏

### 1. –ß–æ–º—É –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –º–æ–∂–µ –≤–≤—ñ–π—Ç–∏ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç?

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:** –¶–µ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ —Ç–∞ –ø–ª—É—Ç–∞–Ω–∏–Ω–∏.

**–ü—Ä–∏—á–∏–Ω–∏:**
- –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –º–∞—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∞ –≤ –∞–¥–º—ñ–Ω—Ü—ñ
- –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç –ø–æ–∫–∞–∑—É—î –æ–ø—Ç–æ–≤—ñ —Ü—ñ–Ω–∏
- –ó–º—ñ—à—É–≤–∞–Ω–Ω—è —Ä–æ–ª–µ–π –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫
- –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤–∏–∫–ª—é—á–Ω–æ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

**–†—ñ—à–µ–Ω–Ω—è:** –Ø–∫—â–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –æ–∫—Ä–µ–º–∏–π —Ç–µ—Å—Ç–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç –ë–ï–ó –ø—Ä–∞–≤ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π –æ–ø—Ç–æ–≤–∏–π –∫–ª—ñ—î–Ω—Ç
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

---

### 2. –ß–æ–º—É –ø—Ä–∏ –≤—Ö–æ–¥—ñ –≤ –∞–¥–º—ñ–Ω–∫—É –Ω–µ –∑–∞–≤–∂–¥–∏ –∑–∞–ø–∏—Ç—É—î –ø–∞—Ä–æ–ª—å?

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –î—ñ—î —Å–µ—Å—ñ—è.

**–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
- –°–µ—Å—ñ—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è **8 –≥–æ–¥–∏–Ω**
- –ü—ñ—Å–ª—è –≤—Ö–æ–¥—É –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–≤–æ–¥–∏—Ç–∏ –ø–∞—Ä–æ–ª—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ—Ç—è–≥–æ–º —Ü—å–æ–≥–æ —á–∞—Å—É
- –¶–µ –∑—Ä—É—á–Ω–æ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –≤–µ—Å—å –¥–µ–Ω—å

**–ö–æ–ª–∏ –∑–∞–ø–∏—Ç–∞—î –ø–∞—Ä–æ–ª—å –∑–Ω–æ–≤—É:**
- –ß–µ—Ä–µ–∑ 8 –≥–æ–¥–∏–Ω –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É
- –ü—ñ—Å–ª—è –≤–∏—Ö–æ–¥—É –∑ –∞–∫–∞—É–Ω—Ç—É (–∫–Ω–æ–ø–∫–∞ "–í–∏–π—Ç–∏")
- –ü—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è cookies –±—Ä–∞—É–∑–µ—Ä–∞
- –ó —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é/–±—Ä–∞—É–∑–µ—Ä–∞

---

### 3. –Ø–∫ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–µ—Ä–º—ñ–Ω –¥—ñ—ó —Å–µ—Å—ñ—ó?

**–î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤:**
```python
# beautyshop/settings/base.py
SESSION_COOKIE_AGE = 60 * 60 * 24 * 14  # 14 –¥–Ω—ñ–≤ (–±—É–ª–æ 7)
```

**–î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:**
```python
# beautyshop/settings/base.py
ADMIN_SESSION_COOKIE_AGE = 60 * 60 * 4  # 4 –≥–æ–¥–∏–Ω–∏ (–±—É–ª–æ 8)
```

---

### 4. –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ –ø—ñ–¥–æ–∑—Ä–∞ –Ω–∞ –∑–ª–æ–º?

**–ù–µ–≥–∞–π–Ω—ñ –¥—ñ—ó:**

1. **–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—ñ:**
   ```bash
   python manage.py changepassword admin
   ```

2. **–°–∫–∏–Ω—É—Ç–∏ –≤—Å—ñ —Å–µ—Å—ñ—ó:**
   ```bash
   python manage.py clearsessions
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏:**
   ```bash
   tail -f logs/security.log
   grep "FAILED" logs/security.log
   ```

4. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
   ```bash
   python manage.py shell
   >>> from apps.users.models import CustomUser
   >>> admins = CustomUser.objects.filter(is_staff=True)
   >>> for admin in admins:
   ...     print(f"{admin.username} | {admin.email} | last_login: {admin.last_login}")
   ```

5. **–û–Ω–æ–≤–∏—Ç–∏ SECRET_KEY:**
   - –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –∫–ª—é—á
   - –û–Ω–æ–≤–∏—Ç–∏ —É –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä

---

### 5. –Ø–∫ –¥–æ–¥–∞—Ç–∏ –¥–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é (2FA)?

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –ø–∞–∫–µ—Ç–∏:**

1. **django-otp** (–¥–ª—è –∞–¥–º—ñ–Ω–∫–∏):
   ```bash
   pip install django-otp
   pip install qrcode
   ```

2. **django-allauth** (–¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤):
   ```bash
   pip install django-allauth
   ```

**–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (–ø—Ä–∏–∫–ª–∞–¥):**
```python
# settings.py
INSTALLED_APPS += [
    'django_otp',
    'django_otp.plugins.otp_totp',
]

MIDDLEWARE += [
    'django_otp.middleware.OTPMiddleware',
]
```

---

### 6. –Ø–∫ –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ –≤—ñ–¥ DDoS –∞—Ç–∞–∫?

**–ù–∞ —Ä—ñ–≤–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞:**

1. **Nginx rate limiting:**
   ```nginx
   limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;
   limit_req zone=general burst=20 nodelay;
   ```

2. **Cloudflare:**
   - –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π CDN –∑ DDoS –∑–∞—Ö–∏—Å—Ç–æ–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç—Ä–∞—Ñ—ñ–∫—É
   - Rate limiting –Ω–∞ —Ä—ñ–≤–Ω—ñ DNS

3. **Fail2ban:**
   ```bash
   sudo apt install fail2ban
   # –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Django
   ```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ –∑ –±–µ–∑–ø–µ–∫–∏

–ü—Ä–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—ñ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π:
- üìß Email: security@beautyshop.ua
- üîí –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ GPG –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- ‚ö†Ô∏è **–ù–ï –ø—É–±–ª—ñ–∫—É–π—Ç–µ** –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ –ø—É–±–ª—ñ—á–Ω–æ –¥–æ —ó—Ö –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
- [Django Security](https://docs.djangoproject.com/en/stable/topics/security/)
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Django Best Practices](https://docs.djangoproject.com/en/stable/howto/deployment/checklist/)

### –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –∞—É–¥–∏—Ç—É:
- `python manage.py check --deploy` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑–ø–µ–∫–∏ Django
- `bandit` ‚Äî —Å—Ç–∞—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∫–æ–¥—É Python
- `safety check` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π —É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö

---

**–î–æ–∫—É–º–µ–Ω—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ:** –ñ–æ–≤—Ç–µ–Ω—å 2024  
**–í–µ—Ä—Å—ñ—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** Beauty Shop Development Team

