class BannerSlider{constructor(containerId){this.container=document.getElementById(containerId);if(!this.container)return;this.slider=this.container.querySelector('.banner-slider');this.slides=this.container.querySelectorAll('.banner-slide');this.prevBtn=this.container.querySelector('.banner-nav-prev');this.nextBtn=this.container.querySelector('.banner-nav-next');this.dotsContainer=this.container.querySelector('.banner-dots');this.currentSlide=0;this.totalSlides=this.slides.length;this.autoplayInterval=null;this.autoplayDelay=5000;this.init()}init(){if(this.totalSlides<=1){if(this.prevBtn)this.prevBtn.style.display='none';if(this.nextBtn)this.nextBtn.style.display='none';if(this.dotsContainer)this.dotsContainer.style.display='none';return}this.createDots();this.bindEvents();this.startAutoplay()}createDots(){if(!this.dotsContainer)return;this.dotsContainer.innerHTML='';for(let i=0;i<this.totalSlides;i++){const dot=document.createElement('button');dot.className=`banner-dot ${i===0?'active':''}`;dot.setAttribute('data-slide',i);dot.setAttribute('aria-label',`Банер ${i+1}`);dot.addEventListener('click',()=>{this.goToSlide(i)});this.dotsContainer.appendChild(dot)}}bindEvents(){if(this.prevBtn){this.prevBtn.addEventListener('click',()=>{this.prevSlide()})}if(this.nextBtn){this.nextBtn.addEventListener('click',()=>{this.nextSlide()})}this.container.addEventListener('mouseenter',()=>{this.stopAutoplay()});this.container.addEventListener('mouseleave',()=>{this.startAutoplay()});document.addEventListener('keydown',e=>{if(e.key==='ArrowLeft'){this.prevSlide()}else if(e.key==='ArrowRight'){this.nextSlide()}});document.addEventListener('visibilitychange',()=>{if(document.hidden){this.stopAutoplay()}else{this.startAutoplay()}})}goToSlide(slideIndex){this.slides[this.currentSlide].classList.remove('active');this.currentSlide=slideIndex;this.slides[this.currentSlide].classList.add('active');this.updateDots();this.restartAutoplay()}nextSlide(){const nextIndex=(this.currentSlide+1)%this.totalSlides;this.goToSlide(nextIndex)}prevSlide(){const prevIndex=(this.currentSlide-1+this.totalSlides)%this.totalSlides;this.goToSlide(prevIndex)}updateDots(){if(!this.dotsContainer)return;const dots=this.dotsContainer.querySelectorAll('.banner-dot');dots.forEach((dot,index)=>{dot.classList.toggle('active',index===this.currentSlide)})}startAutoplay(){if(this.totalSlides<=1)return;this.stopAutoplay();this.autoplayInterval=setInterval(()=>{this.nextSlide()},this.autoplayDelay)}stopAutoplay(){if(this.autoplayInterval){clearInterval(this.autoplayInterval);this.autoplayInterval=null}}restartAutoplay(){this.stopAutoplay();this.startAutoplay()}addSlide(imageUrl,altText){const slide=document.createElement('div');slide.className='banner-slide';slide.innerHTML=`<img src="${imageUrl}" alt="${altText}" class="banner-image">`;this.slider.appendChild(slide);this.slides=this.container.querySelectorAll('.banner-slide');this.totalSlides=this.slides.length;this.createDots();if(this.totalSlides>1&&!this.autoplayInterval){this.startAutoplay()}}destroy(){this.stopAutoplay();if(this.prevBtn){this.prevBtn.removeEventListener('click',this.prevSlide)}if(this.nextBtn){this.nextBtn.removeEventListener('click',this.nextSlide)}}}document.addEventListener('DOMContentLoaded',function(){const bannerSlider=new BannerSlider('bannerSlider');window.beautyShopBannerSlider=bannerSlider});if(typeof module!=='undefined'&&module.exports){module.exports=BannerSlider}
